function generateImg(dNd=""){let upload=document.querySelector(".upload"),download=document.querySelector("#download"),wait=document.querySelector(".wait"),preview=document.querySelector("#image_preview"),preview_image=document.querySelector("#image_preview_image"),submit=document.querySelector("#submit"),errors=document.querySelector("#errors");download.style.cssText="display: none",preview.style.cssText="display: none",errors.style.cssText="display: none";let formData=new FormData(document.querySelector("#form")),fileField=document.querySelector("#file"),uploadType=document.querySelector("#uploadType").value,resolution=document.querySelector("#resolution").value,fps=document.querySelector("#fps").value,loopOption=document.querySelector("#loopOption").checked,timestamp_start=document.querySelector("#timestamp_start").value,timestamp_end=document.querySelector("#timestamp_end").value,url="app/convert.php";if(formData.append("uploadType",uploadType),formData.append("resolution",resolution),formData.append("fps",fps),formData.append("loopOption",loopOption),formData.append("timestamp_start",timestamp_start),formData.append("timestamp_end",timestamp_end),fps<=0||fps>60)return errors.innerHTML="Framerate should be between 1 and 60. (JS)",!1;if(""!==timestamp_start&&!1===/[0-9:.]+/g.test(timestamp_start))return errors.innerHTML="Bad start timestamp. (JS)",!1;if(""!==timestamp_end&&!1===/[0-9:.]+/g.test(timestamp_end))return errors.innerHTML="Bad end timestamp. (JS)",!1;if(!fileField.files&&!dNd)return errors.style.cssText="display: block",void(errors.innerHTML="Please choose a file to upload. (JS)");if(dNd){if(dNd.preventDefault(),!dNd.dataTransfer.files)return void(errors.innerHTML="There was a problem adding files. (JS)");for(var i=0;i<dNd.dataTransfer.files.length;i++)formData.append("file_"+i,dNd.dataTransfer.files[i])}else{if(void 0===fileField.files[0])return void(errors.innerHTML="There was a problem uploading file. (JS)");formData.append("file_0",fileField.files[0])}void 0===fileField.files[0]&&void 0===dNd.dataTransfer.files[0]||(upload.style.cssText="display: none",submit.style.cssText="display: none",preview.style.cssText="display: none",wait.style.cssText="display: block",fetch(url,{method:"POST",body:formData}).then(response=>response.json()).then(result=>{result.link?(download.href=result.link,download.style.cssText="display: block",1==result.display_image_preview&&(preview_image.src=result.link,preview.style.cssText="display: block")):result.error?(errors.innerHTML=result.error,errors.style.cssText="display: block"):(errors.innerHTML="There was a problem uploading file.",errors.style.cssText="display: block"),upload.style.cssText="display: block",wait.style.cssText="display: none",!0===manuel_submit&&(submit.style.cssText="display: block")}))}function dragOverHandler(event){event.preventDefault()}"serviceWorker"in navigator&&navigator.serviceWorker.register("./serviceworker.js").then(reg=>console.log("service worker registered")).catch(err=>console.log("service worker not registered",err));